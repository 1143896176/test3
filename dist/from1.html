<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="css/layui.css">
    <script src="layui.js"></script>
    <title>信息调查表</title>
    <style>
        * {
            /* moz-user-select: -moz-none;
             -moz-user-select: none;
             -o-user-select: none;
             -khtml-user-select: none;
             -webkit-user-select: none;
             -ms-user-select: none;
             user-select: none;*/
        }

        .layui-form-label {
            position: relative;
            float: left;
            display: block;
            padding: 9px 5px;
            width: 98px;
            font-weight: 400;
            line-height: 20px;
            text-align: right;
        }

        .layui-input, .layui-textarea {
            display: inline-block;
            width: 90%;
            padding-left: 10px;
        }

        .layui-form-select .layui-edge {
            position: absolute;
            right: 10%;
        }

        .layui-form-select dl {
            min-width: 90%;
        }

        .readonly {
            border: 0px;
        }

        input {
            word-break: break-all
        }

        h3 {
            margin: 10px;
            text-align: center;
        }
        .nonbsp  .layui-form-item {
            margin-bottom: 0px;
            clear: both;
        }
    </style>
</head>
<body>
<div style="width:100%;max-width: 768px;margin: 0 auto">
    <h3><strong>信息采集表</strong></h3>
    <div class="layui-form-mid layui-word-aux" style="font-size: 12px;margin-left: 30px">注：*为必填项</div>
    <div class="layui-form-item">
        <label class="layui-form-label">采集人手机号</label>
        <div class="layui-input-block">
            <input type="text" name="title"
                   autocomplete="off" class="layui-input readonly " readonly="true">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">采集人姓名</label>
        <div class="layui-input-block">
            <input type="text" name="title"
                   autocomplete="off" class="layui-input readonly" readonly="true">
        </div>
    </div>
    <form class="layui-form" action="" enctype="multipart/form-data">
        <!--商户名称-->
        <div class="layui-form-item">
            <label class="layui-form-label">*商户名称</label>
            <div class="layui-input-block">
                <textarea type="text" name="title"  lay-verify="required|merchantname" placeholder="请输入30个字以内的汉字"
                          autocomplete="off" class="layui-input merchant-name"></textarea>
            </div>
        </div>
        <!-- 商户名称后缀-->
        <div class="layui-form-item">
            <label class="layui-form-label">*名称后缀</label>
            <div class="layui-input-block">
                <textarea type="text" name="title" lay-verify="required|merchantsuffix" placeholder="请输入30个字以内的汉字"
                          autocomplete="off" class="layui-input merchant-suffix  "></textarea>
            </div>
        </div>
        <!--店铺面积-->
        <div class="layui-form-item">
            <label class="layui-form-label">*店铺面积 </label>
            <div class="layui-input-block">
                <input type="text" name="title" lay-verify="required|isDecimal" placeholder="最大5位数，保留两位小数"
                       autocomplete="off" class="layui-input area" maxlength="8">
            </div>
        </div>
        <!--餐厅标签：-->
        <div class="layui-form-item  lable-warp">
            <label class="layui-form-label">*餐厅标签 </label>
            <div class="layui-input-block">
                <input type="checkbox" name="lable" title="店面" value="店面" lay-skin="primary" >
                <input type="checkbox" name="lable" title="品牌" value="品牌"lay-skin="primary" checked>
                <input type="checkbox" name="lable" title="星钻" value="星钻"lay-skin="primary">
            </div>
        </div>
        <!--店铺一级分类：-->
        <div class="layui-form-item  frist">
            <label class="layui-form-label">*店铺一级分类 </label>
            <div class="layui-input-block">
                <input type="checkbox" name="class1" value="一级分类" title="一级分类" lay-skin="primary">
                <input type="checkbox" name="class1" value="其他" title="其他" lay-skin="primary">
            </div>
        </div>
        <!--店铺二级分类：-->
        <div class="layui-form-item">
            <label class="layui-form-label">*店铺二级分类</label>
            <div class="layui-input-block">
                <input type="checkbox" name="class2" title="二级分类" value="二级分类" lay-skin="primary">

            </div>
        </div>
        <!--商家区域-->
        <div class="layui-form-item">
            <label class="layui-form-label">*商家区域</label>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择省</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择市</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择县</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
        </div>
        <!--商家地址-->
        <div class="layui-form-item layui-form-text">

            <label class="layui-form-label">*商家地址</label>
            <div class="layui-input-block">
                <textarea name="desc" lay-verify="required" placeholder="请输入300字以内" class="layui-textarea merchant-address"
                          maxlength="300"></textarea>
            </div>
        </div>
        <!--营业时间-->
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label ">*营业时间</label>
            <div class="layui-input-block"> <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" class="layui-input item" lay-verify="required" >
            </div>
        </div>
        <!--闭店时间-->
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label ">*闭店时间</label>
            <div class="layui-input-block">
                <input type="text" class="layui-input item" lay-verify="required">
            </div>
        </div>
        <!---->
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo" id="submit">下一步</button>
            </div>
        </div>
    </form>
</div>
<script src="js/checked_HasValue.js"></script>
<script src="main.js"></script>
<script>
    layui.use(['form', 'laydate', 'upload', 'jquery'], function () {
        var laydate = layui.laydate;
        var $ = layui.jquery
            , upload = layui.upload;
        var form = layui.form;
        /*
                form.on('submit(formDemo)', function (data) {
                    var flag = false
                    /!* var a = ['like[1]', 'like[2]', 'like[3]', 'like[4]'];
                     var b = ['eat[1]', 'eat[2]', 'eat[3]', 'eat[4]']
                     var b2 = []
                     var a1 = []

                     checkbox1(a, a1, data)
                     checkbox1(b, b2, data)
                     if (b2.length < 1 || a1.length < 1) {
                         flag = false;
                     } else if (b2.length >= 1 && a1.length >= 1) {
                         flag = true;
                     }*!/
                    var hasvalue = layui.checked_HasValue($, 'eat[0]', '复选框为必选项');
                    if (hasvalue == false) {
                        return false;
                    }
                    debugger

                    console.log(data.elem) //被执行事件的元素DOM对象，一般为button对象
                    console.log(data.form) //被执行提交的form对象，一般在存在form标签时才会返回
                    console.log(data.field) //当前容器的全部表单字段，名值对形式：{name: value}
                    //阻止表单跳转。如果需要表单跳转，去掉这段即可。
                    layer.msg(JSON.stringify(data.field));
                    return false
                });
        */
        //监听提交
        form.on('submit(formDemo)', function (data) {

            var hasEat = layui.checked_HasValue($, 'lable', '复选框为必选项');
            if (hasEat == false) {
                return false;
            }
            var haslike = layui.checked_HasValue($, 'class1', '复选框为必选项');
            if (haslike == false) {
                return false;
            }
            var haslike = layui.checked_HasValue($, 'class2', '复选框为必选项');
            if (haslike == false) {
                return false;
            }

            layer.msg(JSON.stringify(data.field));
            /* return false;*/
        });

        function checkbox1(obj, obj2, data) {
            for (var i = 0; i < obj.length; i++) {
                if (data.field[obj[i]] == 'on') {
                    obj2.push('on')
                }
                console.log(data.field[obj[i]]);
            }
        }
    })

</script>
</body>
</html>