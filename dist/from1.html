<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="css/layui.css">
    <script src="layui.js"></script>
    <title>信息调查表</title>
    <style>
        * {
            /* moz-user-select: -moz-none;
             -moz-user-select: none;
             -o-user-select: none;
             -khtml-user-select: none;
             -webkit-user-select: none;
             -ms-user-select: none;
             user-select: none;*/
        }

        .layui-form-label {
            position: relative;
            float: left;
            display: block;
            padding: 9px 5px;
            width: 98px;
            font-weight: 400;
            line-height: 20px;
            text-align: right;
        }

        .layui-input, .layui-textarea {
            display: inline-block;
            width: 90%;
            padding-left: 10px;
        }

        .layui-form-select .layui-edge {
            position: absolute;
            right: 10%;
        }

        .layui-form-select dl {
            min-width: 90%;
        }

        .readonly {
            border: 0px;
        }

        input {
            word-break: break-all
        }

        h3 {
            margin: 10px;
            text-align: center;
        }
        .nonbsp  .layui-form-item {
            margin-bottom: 0px;
            clear: both;
        }
    </style>
</head>
<body>
<div style="width:100%;max-width: 768px;margin: 0 auto">
    <h3><strong>信息采集表</strong></h3>
    <div class="layui-form-mid layui-word-aux" style="font-size: 12px;margin-left: 30px">注：*为必填项</div>
    <div class="layui-form-item">
        <label class="layui-form-label">采集人手机号</label>
        <div class="layui-input-block">
            <input type="text" name="title"
                   autocomplete="off" class="layui-input readonly " readonly="true">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">采集人姓名</label>
        <div class="layui-input-block">
            <input type="text" name="title"
                   autocomplete="off" class="layui-input readonly" readonly="true">
        </div>
    </div>
    <form class="layui-form" action="" enctype="multipart/form-data">
        <!--商户名称-->
        <div class="layui-form-item">
            <label class="layui-form-label">*商户名称</label>
            <div class="layui-input-block">
                <textarea type="text" name="title" required lay-verify="merchantname" placeholder="请输入30个字以内的汉字"
                          autocomplete="off" class="layui-input merchant-name"></textarea>
            </div>
        </div>
        <!-- 商户名称后缀-->
        <div class="layui-form-item">
            <label class="layui-form-label">*名称后缀</label>
            <div class="layui-input-block">
                <textarea type="text" name="title" required lay-verify="merchantsuffix" placeholder="请输入30个字以内的汉字"
                          autocomplete="off" class="layui-input merchant-suffix  "></textarea>
            </div>
        </div>
        <!--店铺面积-->
        <div class="layui-form-item">
            <label class="layui-form-label">*店铺面积 </label>
            <div class="layui-input-block">
                <input type="text" name="title" required lay-verify="isDecimal" placeholder="最大5位数，保留两位小数"
                       autocomplete="off" class="layui-input area" maxlength="8">
            </div>
        </div>
        <!--餐厅标签：-->
        <div class="layui-form-item  lable-warp">
            <label class="layui-form-label">*餐厅标签 </label>
            <div class="layui-input-block">
                <input type="checkbox" name="like[write]" title="店面">
                <input type="checkbox" name="like[read]" title="品牌" checked>
                <input type="checkbox" name="like[dai]" title="星钻">
            </div>
        </div>
        <!--店铺一级分类：-->
        <div class="layui-form-item  frist">
            <label class="layui-form-label">*店铺一级分类 </label>
            <div class="layui-input-block">
                <input type="checkbox" name="like[write]" title="一级分类">
                <input type="checkbox" name="like[dai]" title="其他">
            </div>
        </div>
        <!--店铺二级分类：-->
        <div class="layui-form-item">
            <label class="layui-form-label">*店铺二级分类</label>
            <div class="layui-input-block">
                <input type="checkbox" name="like[write]" title="二级分类">

            </div>
        </div>
        <!--商家区域-->
        <div class="layui-form-item">
            <label class="layui-form-label">*商家区域</label>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择省</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择市</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
            <div class="layui-input-block">
                <select name="city" lay-verify="required">
                    <option value=""> 请选择县</option>
                    <option value="0">北京</option>
                    <option value="1">上海</option>
                    <option value="2">广州</option>
                    <option value="3">深圳</option>
                    <option value="4">杭州</option>
                </select>
            </div>
        </div>
        <!--商家地址-->
        <div class="layui-form-item layui-form-text">

            <label class="layui-form-label">*商家地址</label>
            <div class="layui-input-block">
                <textarea name="desc" placeholder="请输入300字以内" class="layui-textarea merchant-address"
                          maxlength="300"></textarea>
            </div>
        </div>
        <!--营业时间-->
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label ">*营业时间</label>
            <div class="layui-input-block"> <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" class="layui-input item">
            </div>
        </div>
        <!--闭店时间-->
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label ">*闭店时间</label>
            <div class="layui-input-block"> <!-- 注意：这一层元素并不是必须的 -->
                <input type="text" class="layui-input item">
            </div>
        </div>
        <!---->
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo" id="submit">下一步</button>
            </div>
        </div>
    </form>
</div>
<script>
    //Demo
    layui.use(['form', 'laydate', 'upload', 'jquery'], function () {
        var laydate = layui.laydate;
        var $ = layui.jquery
            , upload = layui.upload;
        var form = layui.form;
        lay('.item').each(function () {
            laydate.render({
                elem: this
                , trigger: 'click',
                type: 'time'
            });
        });


        //监听提交
        form.on('submit(formDemo)', function (data) {
            layer.msg(JSON.stringify(data.field));
            return false;
        });
        form.verify({
            //检验是否带有两位小数
            isDecimal: [/^\d{1,5}\.\d{2}$/, '店铺面积整数部分最大5位，必须保留小数点后两位'],
            //校验手机位数11/12
            isTelnum: [/^[1-9][0-9]{10,11}$/, '只能输入11或12位数字'],
            //校验手机位数11
            isTel: [/^[1-9][0-9]{10}$/, '只能输入11或12位数字'],
            //校验星钻等级1-5    ^[A-Za-z0-9]+$
            isFive: [/^[1-5]{1}$/, '星钻等级为1-5'],
            //校验是否是百位以内数字
            isThree:[/^[1-9][0-9]{2}$/,'餐具套数范围为999-1'],
            //校验是否中文名称
            isChina: [/^[\u4E00-\u9FA5]{1,30}$/, '商户名称和后缀最多可输入30个汉字'],
            isChina2: [/^[\u4E00-\u9FA5]{1,20}$/, '最多可输入20个汉字'],
            isChina3: [/^[\u4E00-\u9FA5]{1,10}$/, '最多可输入10个汉字'],
            //我们既支持上述函数式的方式，也支持下述数组的形式
            //数组的两个值分别代表：[正则匹配、匹配不符时的提示文字]
            //校验登录密码
            isPass: [
                /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/
                , '登录密码必须是6到20位英文数字混合且不能出特殊字符'
            ], merchantname: [/^[\u4E00-\u9FA5]{1,30}$/, '商户名称最多可输入30个汉字'],
            merchantsuffix: [/^[\u4E00-\u9FA5]{1,30}$/, '商户名称后缀最多可输入30个汉字'],
            area: [/^\d{1,5}\.\d{2}$/, '店铺面积整数部分最大5位，必须保留小数点后两位'],
            loginaccount: [/^[1-9]{11}$/, '登录账号只能输入11位手机号'],
            loginpassword: [/^[1-9][0-9]{10,11}$/, '只能输入11或12位数字'],
            seatmachine: [/^[1-9][0-9]{10,11}$/, '餐厅座机只能输入11或12位数字'],
            head: [/^[\u4E00-\u9FA5]{1,10}$/, '餐厅负责人姓名最多可输入10个汉字'],
            headtel: [/^[1-9][0-9]{10,11}$/, '餐厅负责人电话只能输入11或12位数字'],
            legalperson: [/^[\u4E00-\u9FA5]{1,20}$/, '法人姓名最多可输入20个汉字'],
            legaltel: [/^[1-9][0-9]{10}$/, '法人联系方式只能输入11位手机号'],
            legalider: [/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/, '法人身份证号不对请重输']
        });


        //普通图片上传

        var uploadInst = upload.render({
            elem: '#test1'
            , url: '/upload/'
            , auto: true, type: 'image',
            /* bindAction: '#submit',*/
            exts: "jpg|png|gif|jpeg"//允许后缀
            , before: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('.demoText');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst.upload();
                });
            }
        });

        var uploadInst2 = upload.render({
            elem: '#test2'
            , url: '/upload/'
            , auto: true, type: 'image',
            /* bindAction: '#submit',*/
            exts: "jpg|png|gif|jpeg"//允许后缀
            , before: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo2').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('.demoText2');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst2.upload();
                });
            }
        });
        var uploadInst3 = upload.render({
            elem: '#test3'
            , url: '/upload/'
            , auto: true, type: 'image',
            /*
                        bindAction: '#submit',
            */
            exts: "jpg|png|gif|jpeg"//允许后缀
            , before: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo3').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('.demoText3');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst3.upload();
                });
            }
        });
        var uploadInst4 = upload.render({
            elem: '#test4'
            , url: '/upload/'
            , auto: true, type: 'image',
            /* bindAction: '#submit',*/
            exts: "jpg|png|gif|jpeg"//允许后缀
            , before: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo4').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('.demoText4');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-mini demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst4.upload();
                });
            }
        });
        /*失去焦点判断*/
        $('.merchant-name').blur(function () {
            if (!ischina($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.merchant-suffix').blur(function () {
            if (!ischina($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.area ').blur(function () {
            if (!isDecimal($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.merchant-address ').blur(function () {
            if (!ischina4($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.login-account').blur(function () {
            if (!isTelnum($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.login-password').blur(function () {
            if (!isPass($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.seat-machine').blur(function () {
            if (!isTelnum2($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.seat-machine2').blur(function () {
            if (!isTelnum2($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.head').blur(function () {
            if (!ischina2($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.head-tel').blur(function () {
            if (!isTelnum2($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.head-like').blur(function () {
            if (!ischina1($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        function isfives() {
            if (!isFive($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        }
        $('.lable-warp >.layui-input-block').on('blur', '.lable', function(e) {

            if (!isFive($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.select').on('blur', '.asa', function(e) {

            if (!isThree($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        /*餐具套系*/
        //
        $('.legal-person').blur(function () {
            if (!ischina1($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.legal-tel').blur(function () {
            if (!isTelnum($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.legal-ider').blur(function () {
            if (!isID($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.finance-name').blur(function () {
            if (!ischina1($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        $('.finance-tel').blur(function () {
            if (!isTelnum($(this).val())) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }
        });
        //动态添加套餐数量
        $('.select .layui-unselect').click(function () {

            if ($(this).hasClass('layui-form-checked')) {
                $(this).after("<input class='asa' type=\"text\" name=\"password\" required lay-verify=\"isThree\"  placeholder=\"最大3位数\"autocomplete=\"off\" class=\"layui-input\" style=\"width: 100px;display:inline-block;height: 30px; line-height: 1.3;line-height: 30px\\9; border-width: 1px;border-style: solid;background-color: #fff; border-radius: 2px;border-color: #e6e6e6;\"maxlength=3>")
            } else {
                $(this).siblings('.asa').remove()
            }
        });
        $('.lable-warp>div>div:nth-child(6) ').click(function () {
            if ($(this).hasClass('layui-form-checked')) {
                $(this).after(" <input onblur=\"isfives()\" type=\"number\" name=\"title\" required lay-verify=\"isFive\" placeholder=\"请输入星钻等级1-5\"autocomplete=\"off\" class=\"layui-input lable\" style=\"display:inline-block;height:32px;width: 180px\" maxlength=\"1\">")
            } else {
                $(this).siblings('.lable').remove()
            }
        });
        $('.frist>div>div:nth-child(4)').click(function () {
            if ($(this).hasClass('layui-form-checked')) {
                $(this).after(" <textarea name=\"desc\" placeholder=\"请输入50字以内信息\" lay-verify=\"required\" class=\"layui-textarea classify\"maxlength=\"50\" ></textarea>")
            } else {
                $(this).siblings('.classify').remove()
            }
        });

        //判断是否合法
        function getisDecimal(res) {
            if (!isDecimal(res)) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }

        }

        //检验是否带有两位小数
        function isDecimal(strValue) {
            var objRegExp = /^\d{1,5}\.\d{2}$/;
            return objRegExp.test(strValue);
        }

        //校验手机位数11/12
        function getisTelnum(res) {
            if (!isTelnum(res)) {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:red'>✘ </span>")
            } else {
                $(this).siblings('span').remove();
                $(this).after("<span style='color:green'>✔ </span>")
            }

        }

        function isTelnum2(str) {
            var reg = /^[1-9][0-9]{10,11}$/;
            /*定义验证表达式*/
            return reg.test(str);
            /*进行验证*/
        }

        function isTelnum(str) {
            var reg = /^[1-9][0-9]{10}$/;
            /*定义验证表达式*/
            return reg.test(str);
            /*进行验证*/
        }

        //校验是否中文名称

        function ischina(str) {
            var reg = /^[\u4E00-\u9FA5]{1,30}$/;
            return reg.test(str);
        }

        function ischina1(str) {
            var reg = /^[\u4E00-\u9FA5]{1,20}$/;
            return reg.test(str);
        }

        function ischina2(str) {
            var reg = /^[\u4E00-\u9FA5]{1,10}$/;
            return reg.test(str);
        }

        function ischina3(str) {
            var reg = /^[\u4E00-\u9FA5]{1,50}$/;
            return reg.test(str);
        }

        function ischina4(str) {
            var reg = /^[\u4E00-\u9FA5]{1,300}$/;
            return reg.test(str);
        }

        //校验星钻等级1-5    ^[A-Za-z0-9]+$
        function isFive(str) {
            var reg = /^[1-5]{1}$/;
            return reg.test(str);
        }
//最大三位数
        function isThree(str) {
            var reg = /^[1-5][0-9]{2}$/;
            return reg.test(str);
        }
        //校验身份证
        function isID(str) {
            var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
            return reg.test(str);
        }

        //校验登录密码
        function isPass(str) {
            var reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;
            return reg.test(str);
        }
    });

</script>
</body>
</html>